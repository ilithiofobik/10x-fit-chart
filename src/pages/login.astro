---
import Layout from "@/layouts/Layout.astro";
import { LoginForm } from "@/components/auth/LoginForm";
import { supabaseServer } from "@/db/supabase-server";
import { Toaster } from "@/components/ui/sonner";

// Sprawdź czy użytkownik jest już zalogowany
const supabase = supabaseServer(Astro);
const {
  data: { session },
} = await supabase.auth.getSession();

// Przekieruj na dashboard jeśli zalogowany
if (session) {
  return Astro.redirect("/app/dashboard");
}
---

<Layout title="Logowanie - 10xFitChart" description="Zaloguj się do 10xFitChart">
  <div class="flex min-h-screen items-center justify-center px-4">
    <div class="w-full max-w-md">
      <LoginForm client:load />
    </div>
  </div>
  <Toaster client:load position="top-right" />
</Layout>
