---
import Layout from "@/layouts/Layout.astro";
import { RegisterForm } from "@/components/auth/RegisterForm";
import { supabaseServer } from "@/db/supabase-server";
import { Toaster } from "@/components/ui/sonner";

// Sprawdź czy użytkownik jest już zalogowany
const supabase = supabaseServer(Astro);
const { data: { session } } = await supabase.auth.getSession();

// Przekieruj na dashboard jeśli zalogowany
if (session) {
  return Astro.redirect("/app/dashboard");
}
---

<Layout
  title="Rejestracja - 10xFitChart"
  description="Zarejestruj się w 10xFitChart"
>
  <div class="flex min-h-screen items-center justify-center px-4">
    <div class="w-full max-w-md">
      <RegisterForm client:load />
    </div>
  </div>
  <Toaster client:load position="top-right" />
</Layout>
